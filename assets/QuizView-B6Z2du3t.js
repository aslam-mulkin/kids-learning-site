import{r as c,c as K,j as e,C as h,a as m,b as f,B as t}from"./index-BnrzWVsA.js";function F({items:s,topicKey:k,setId:g,onProgress:d}){const[l,j]=c.useState(0),[r,w]=c.useState(Array(s.length).fill(-1)),[i,C]=c.useState(!1),[y,b]=c.useState(!1),p=c.useRef(!1),N=c.useMemo(()=>r.every(a=>a!==-1),[r]),o=c.useMemo(()=>r.reduce((a,n,x)=>a+(n===s[x].answer?1:0),0),[r,s]);c.useEffect(()=>{i&&!p.current&&(K(k,g,o,s.length),p.current=!0,d==null||d()),i||(p.current=!1)},[i,o,k,g,s.length,d]);function R(a){if(i)return;const n=[...r];n[l]=a,w(n)}function B(){l<s.length-1&&j(l+1)}function E(){l>0&&j(l-1)}function J(){N&&C(!0)}function S(){j(0),w(Array(s.length).fill(-1)),C(!1),b(!1)}if(i&&!y)return e.jsxs(h,{className:"max-w-xl mx-auto",children:[e.jsx(m,{children:"Nilai Akhir"}),e.jsxs(f,{className:"space-y-3",children:[e.jsxs("div",{className:"text-lg font-semibold",children:["Skor: ",o," / ",s.length]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Selesaikan semua soal untuk melihat kunci jawaban."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{onClick:()=>b(!0),children:"Lihat Kunci Jawaban"}),e.jsx(t,{variant:"outline",onClick:S,children:"Ulangi"})]})]})]});if(i&&y)return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(h,{className:"max-w-xl mx-auto",children:[e.jsx(m,{children:"Ulasan Jawaban"}),e.jsxs(f,{className:"text-sm text-slate-600",children:["Skor: ",o," / ",s.length]})]}),e.jsx("div",{className:"space-y-4",children:s.map((a,n)=>{const x=r[n];return e.jsxs(h,{className:"max-w-3xl mx-auto",children:[e.jsxs(m,{className:"mb-2",children:["Soal ",n+1]}),e.jsxs(f,{children:[e.jsx("div",{className:"mb-3",children:a.q}),e.jsx("div",{className:"space-y-2",children:a.options.map((v,u)=>{const z=u===a.answer?"border-green-500 bg-green-50":u===x?"border-red-500 bg-red-50":"border-slate-200";return e.jsxs("div",{className:`border rounded-xl p-2 ${z}`,children:[M(u),". ",v]},u)})}),a.explain&&e.jsxs("div",{className:"mt-3 text-sm text-slate-600",children:["Pembahasan: ",a.explain]})]})]},a.id)})}),e.jsxs("div",{className:"max-w-3xl mx-auto flex gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>b(!1),children:"Kembali"}),e.jsx(t,{onClick:S,children:"Ulangi Kuis"})]})]});const A=s[l],U=r[l];return e.jsxs(h,{className:"max-w-2xl mx-auto",children:[e.jsxs(m,{className:"mb-2",children:["Soal ",l+1," / ",s.length]}),e.jsxs(f,{children:[e.jsx("div",{className:"mb-4",children:A.q}),e.jsx("div",{className:"space-y-2 mb-4",children:A.options.map((a,n)=>{const v=U===n?"border-blue-500 ring-1 ring-blue-200":"border-slate-200";return e.jsxs("div",{className:`border rounded-xl p-2 cursor-pointer ${v}`,onClick:()=>R(n),children:[M(n),". ",a]},n)})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(t,{variant:"outline",onClick:E,disabled:l===0,children:"Sebelumnya"}),e.jsx(t,{onClick:B,disabled:l===s.length-1,children:"Berikutnya"}),e.jsx(t,{variant:"outline",onClick:J,className:"ml-auto",disabled:!N,children:"Selesai"})]}),!N&&e.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Jawab semua pertanyaan untuk menyelesaikan kuis."})]})]})}function M(s){return String.fromCharCode(65+s)}export{F as default};
